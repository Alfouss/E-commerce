{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jumo\\\\Documents\\\\Project\\\\React_project\\\\e-commerce\\\\mon-app\\\\src\\\\component\\\\Register.js\";\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Container, Row, Button, Col, Form } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport Admin from './Admin';\nimport { connect } from \"react-redux\";\nimport { showUser, showProduct } from '../actions/actions';\nimport { bindActionCreators } from 'redux';\nimport * as serviceUser from \"../services/serviceUser\";\nimport * as serviceProduct from \"../services/serviceProduct\";\nimport { withRouter } from \"react-router-dom\";\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.sendForm = this.sendForm.bind(this);\n    this.connect = this.connect.bind(this);\n    this.state = {\n      page: this.props.path.pathname,\n      mail: \"\",\n      password: \"\",\n      datasUsers: [],\n      check: \"\",\n      admin: false\n    };\n  }\n\n  async componentDidMount() {\n    let Users = await serviceUser.allDataUsers();\n    let Products = await serviceProduct.allDataProducts();\n    this.props.dispatch(showUser(Users.data));\n    this.props.dispatch(showProduct(Products.data));\n    this.setState({\n      datasUsers: Users.data\n    });\n  }\n\n  CheckMail(mail) {\n    if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(mail)) return true;\n    return false;\n  }\n\n  checkPassword(password) {\n    if (/^\\w{8,12}$/.test(password)) return true;\n    return false;\n  }\n\n  async sendForm(e) {\n    if (this.checkMail(e.target.mail.value)) {\n      if (this.checkPassword(e.target.password.value)) {\n        serviceUser.createUser(e);\n        this.setState({\n          page: \"login\",\n          mail: e.target.mail.value,\n          password: e.target.password.value\n        });\n        alert(\"Created\");\n        window.location.reload();\n      } else {\n        alert(\"Password short or no valid\");\n      }\n    } else {\n      alert(\"Adress not valid.Please can you enter a valid adress\");\n    }\n  }\n\n  async connect(e) {\n    e.preventDefault();\n\n    if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(e.target.mail.value)) {\n      if (/^\\w{8,12}$/.test(e.target.password.value)) {\n        let getUser = await serviceUser.checkUser(e);\n        this.setState({\n          page: null,\n          check: getUser\n        });\n\n        if (getUser !== \"admin@admin.com\") {\n          localStorage.setItem(\"user\", getUser);\n          this.setState({\n            admin: false\n          });\n          this.props.history.push(\"/\");\n        } else {\n          localStorage.setItem(\"user\", getUser);\n          this.props.history.push(\"/admin\");\n        }\n      } else {\n        alert(\"Wrong password\");\n      }\n    } else {\n      alert(\"veuillez entrez une adresse valide \");\n    }\n  }\n\n  register() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }\n    }, this.state.page === \"register\" && localStorage.getItem(\"user\") === null && /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      className: \"mb-3\",\n      onSubmit: this.sendForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 25\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"mail\",\n      ref: \"mail\",\n      placeholder: \"Enter email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 25\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"password\",\n      name: \"password\",\n      ref: \"password\",\n      placeholder: \"Enter pass\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"password\",\n      name: \"passwordVerif\",\n      ref: \"passwordVerif\",\n      placeholder: \"Enter pass\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, \"Envoyer\")), /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      onClick: () => {\n        this.setState({\n          page: \"signin\"\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 30\n      }\n    }, \"Accueil\"))), this.state.page === \"signin\" && localStorage.getItem(\"user\") === null && /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      className: \"mb-3\",\n      onSubmit: this.connect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"mail\",\n      ref: \"mail\",\n      placeholder: \"Enter email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 29\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"password\",\n      name: \"password\",\n      ref: \"password\",\n      placeholder: \"Enter pass\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 25\n      }\n    }, \"Envoyer\")), /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      onClick: () => {\n        this.setState({\n          page: \"register\"\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, \"Register\"), /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 34\n      }\n    }, \"Accueil\"))));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: \"justify-content-md-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }\n    }, this.register())));\n  }\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    user: bindActionCreators(showUser, dispatch),\n    product: bindActionCreators(showProduct, dispatch)\n  };\n}\n\nexport default connect(mapDispatchToProps)(withRouter(Register));","map":{"version":3,"sources":["C:/Users/Jumo/Documents/Project/React_project/e-commerce/mon-app/src/component/Register.js"],"names":["React","Container","Row","Button","Col","Form","Link","Admin","connect","showUser","showProduct","bindActionCreators","serviceUser","serviceProduct","withRouter","Register","Component","constructor","props","sendForm","bind","state","page","path","pathname","mail","password","datasUsers","check","admin","componentDidMount","Users","allDataUsers","Products","allDataProducts","dispatch","data","setState","CheckMail","test","checkPassword","e","checkMail","target","value","createUser","alert","window","location","reload","preventDefault","getUser","checkUser","localStorage","setItem","history","push","register","getItem","render","mapDispatchToProps","user","product"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Container, Row, Button, Col, Form} from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport Admin from './Admin';\r\nimport{connect} from \"react-redux\";\r\nimport { showUser, showProduct } from '../actions/actions';\r\nimport { bindActionCreators } from 'redux';\r\nimport * as serviceUser from \"../services/serviceUser\";\r\nimport * as serviceProduct from \"../services/serviceProduct\";\r\nimport {withRouter} from \"react-router-dom\";\r\n\r\nclass Register extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.sendForm = this.sendForm.bind(this);\r\n        this.connect = this.connect.bind(this);\r\n\r\n        \r\n        this.state = {\r\n            page: this.props.path.pathname,\r\n            mail:\"\",\r\n            password:\"\",\r\n            datasUsers: [],\r\n            check:\"\",\r\n            admin:false\r\n\r\n        }\r\n    }\r\n\r\n    async componentDidMount(){\r\n        let Users = await serviceUser.allDataUsers();\r\n        let Products = await serviceProduct.allDataProducts();\r\n        this.props.dispatch(showUser(Users.data));\r\n        this.props.dispatch(showProduct(Products.data));\r\n            \r\n        this.setState({datasUsers: Users.data});\r\n        \r\n    }\r\n\r\n    CheckMail(mail){\r\n        if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(mail)) return true\r\n        return false\r\n    }\r\n\r\n    checkPassword(password){\r\n        if (/^\\w{8,12}$/.test(password)) return true\r\n        return false\r\n    }\r\n\r\n   async sendForm(e){\r\n        if (this.checkMail(e.target.mail.value))\r\n        {\r\n            if(this.checkPassword(e.target.password.value)){\r\n                serviceUser.createUser(e);\r\n            this.setState({page: \"login\", \r\n                        mail: e.target.mail.value, \r\n                        password: e.target.password.value});\r\n            alert(\"Created\");\r\n            window.location.reload();\r\n            }else{\r\n                alert(\"Password short or no valid\")\r\n            }\r\n        }else{\r\n            alert(\"Adress not valid.Please can you enter a valid adress\")\r\n        }\r\n       \r\n    }\r\n\r\n    \r\n\r\n    async connect(e){\r\n\r\n        \r\n\r\n        e.preventDefault();\r\n        if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(e.target.mail.value))\r\n        {\r\n            if(/^\\w{8,12}$/.test(e.target.password.value)){\r\n                let getUser = await serviceUser.checkUser(e);\r\n                this.setState({page: null, check: getUser});\r\n                if(getUser !== \"admin@admin.com\"){\r\n                    localStorage.setItem(\"user\", getUser)\r\n                    this.setState({admin: false})\r\n                    this.props.history.push(\"/\")\r\n                }\r\n                else{ \r\n                    localStorage.setItem(\"user\", getUser)\r\n                    this.props.history.push(\"/admin\")\r\n\r\n            }\r\n\r\n            }else{\r\n                alert(\"Wrong password\")\r\n            }\r\n            \r\n        }else{\r\n            alert(\"veuillez entrez une adresse valide \")\r\n        }\r\n        \r\n    }\r\n\r\n    register(){\r\n      return ( \r\n      <div> \r\n          {this.state.page === \"register\" && localStorage.getItem(\"user\") === null &&\r\n            <Col>\r\n                <Form className=\"mb-3\" onSubmit={this.sendForm}>\r\n                    <Form.Group>\r\n                        <Form.Label>Email</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"mail\" ref=\"mail\" placeholder=\"Enter email\" />\r\n                        <Form.Label>Password</Form.Label>\r\n                        <Form.Control type=\"password\" name=\"password\" ref=\"password\" placeholder=\"Enter pass\" />\r\n                        <Form.Label>Password</Form.Label>\r\n                        <Form.Control type=\"password\" name=\"passwordVerif\" ref=\"passwordVerif\" placeholder=\"Enter pass\" />\r\n                    </Form.Group>\r\n                    <Button type=\"submit\">Envoyer</Button>\r\n                </Form>\r\n                <Button type=\"button\" onClick={() => { this.setState({page: \"signin\"})}}>Login</Button>\r\n                <Link to=\"/\"><Button>Accueil</Button></Link>\r\n            </Col>\r\n          }\r\n\r\n          {this.state.page === \"signin\" && localStorage.getItem(\"user\") === null && \r\n                <Col>\r\n                    <Form className=\"mb-3\" onSubmit={this.connect}>\r\n                        <Form.Group controlId=\"form\">\r\n                            <Form.Label>Email</Form.Label>\r\n                            <Form.Control type=\"text\" name=\"mail\" ref=\"mail\" placeholder=\"Enter email\" />\r\n                            <Form.Label>Password</Form.Label>\r\n                            <Form.Control  type=\"password\" name=\"password\" ref=\"password\" placeholder=\"Enter pass\" />\r\n                        </Form.Group>\r\n                        <Button type=\"submit\">Envoyer</Button>\r\n                    </Form>\r\n                    <Button type=\"button\"  onClick={() => { this.setState({page: \"register\"})}}>Register</Button>\r\n                    <Link to=\"/\"><Button>Accueil</Button></Link>\r\n                </Col>\r\n            }\r\n            \r\n        </div>)\r\n        \r\n    }\r\n    \r\n    render(){\r\n        return(\r\n            <div>\r\n                <Container>\r\n                    <Row className=\"justify-content-md-center\">\r\n                        {this.register()}\r\n                    </Row>\r\n                </Container>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return { \r\n        user: bindActionCreators(showUser, dispatch),\r\n        product: bindActionCreators(showProduct, dispatch)\r\n    }\r\n  }\r\n  \r\n  export default connect(mapDispatchToProps)(withRouter(Register));"]},"metadata":{},"sourceType":"module"}