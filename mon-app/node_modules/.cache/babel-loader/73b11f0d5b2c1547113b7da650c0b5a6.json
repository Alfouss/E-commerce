{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jumo\\\\Documents\\\\Project\\\\React_project\\\\e-commerce\\\\mon-app\\\\src\\\\component\\\\ListCard.js\";\nimport React from \"react\";\nimport { Card, Button, Container, Row, Col } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { addProductInCart } from \"../actions/actions\";\nimport { connect } from \"react-redux\";\n\nclass ListCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      params: this.props.params\n    };\n    this.addCart = this.addCart.bind(this);\n  }\n\n  async componentDidMount() {\n    this.list((await this.props.products), this.props.params);\n  }\n\n  async componentWillReceiveProps(nextProps) {\n    this.list((await this.props.products), nextProps.params);\n  }\n\n  async list(data, endPoint) {\n    let list;\n\n    switch (endPoint.type) {\n      case \"all\":\n        list = this.displayAll(data, endPoint);\n        break;\n\n      case \"filter\":\n        list = this.displayByCategory(data, endPoint);\n        break;\n\n      case \"searcharticle\":\n        list = this.displayByArticlesSearch(data, endPoint);\n        break;\n\n      case \"sort\":\n        list = this.displayBySort(data, endPoint);\n        break;\n\n      case \"article\":\n        list = this.displayOneArticle(data, endPoint);\n        break;\n\n      case \"cart\":\n        list = this.displayCart(data);\n        break;\n\n      default:\n        return null;\n    }\n\n    this.setState({\n      list: await list\n    });\n  }\n\n  CardProduct(value, index) {\n    return /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      lg: 3,\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"border border-secondary mt-3 mr-3\",\n      style: {\n        width: '100%',\n        height: \"30em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card.Img, {\n      variant: \"pic\",\n      src: window.location.origin + \"/img/\" + value.photo,\n      style: {\n        width: \"auto\",\n        height: \"16em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/article/\" + value._id,\n      className: \"p-0 text-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 25\n      }\n    }, value.article), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 25\n      }\n    }, value.price, \"$\"), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 25\n      }\n    }, \"description: \", value.describe), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        this.addCart(value);\n      },\n      variant: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 25\n      }\n    }, \"Add cart\"))));\n  }\n\n  describeProduct(value, index) {\n    return /*#__PURE__*/React.createElement(Container, {\n      className: \"border border-secondary mt-3 mr-3\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: window.location.origin + \"/img/\" + value.photo,\n      style: {\n        width: '15em'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      lg: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 42\n      }\n    }, value.article)), /*#__PURE__*/React.createElement(Col, {\n      lg: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 42\n      }\n    }, value.describe)), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 33\n      }\n    }, \"Add cart\"))))));\n  }\n\n  async displayAll(data, endPoint) {\n    let list = await data.map((value, index) => {\n      if (endPoint.category === (undefined || \"all\")) {\n        return this.CardProduct(value, index);\n      }\n    });\n    return list;\n  }\n\n  async displayByCategory(data, endPoint) {\n    let list = await data.map((value, index) => {\n      if (endPoint.category === value.category) {\n        return this.CardProduct(value, index);\n      } else if (endPoint.category === \"all\") {\n        return this.CardProduct(value, index);\n      }\n    });\n    return list;\n  }\n\n  async displayByArticlesSearch(data, endPoint) {\n    let list = await data.map((value, index) => {\n      if (endPoint.category === value.article.toLowerCase()) {\n        return this.CardProduct(value, index);\n      }\n    });\n    return list;\n  }\n\n  async displayBySort(data, endPoint) {\n    let dataSort;\n    let list;\n    dataSort = await data;\n    let sort = await data.sort((a, b) => a.price - b.price);\n\n    if (endPoint.category === \"low\") {\n      dataSort = sort;\n    } else if (endPoint.category === \"high\") {\n      dataSort = sort.reverse();\n    }\n\n    list = await dataSort.map((value, index) => {\n      return this.CardProduct(value, index);\n    });\n    return list;\n  }\n\n  async displayOneArticle(data, endPoint) {\n    let list = await data.map((value, index) => {\n      if (endPoint.category === value._id) {\n        return this.describeProduct(value, index);\n      }\n    });\n    return list;\n  }\n\n  async displayCart(data) {\n    let list = await data.map((value, index) => {\n      return this.describeProduct(value, index);\n    });\n    return list;\n  }\n\n  async addCart(value) {\n    let arrayCart = await this.props.cart;\n    arrayCart.push({\n      _id: value._id,\n      article: value.article,\n      price: value.price,\n      quantity: 0,\n      photo: value.photo\n    });\n    this.props.actions(this.checkIfExist(arrayCart));\n  }\n\n  checkIfExist(arrayCart) {\n    let newArray = arrayCart;\n\n    for (var i = 0; i < arrayCart.length; i++) {\n      if (arrayCart[i]._id === arrayCart[arrayCart.length - 1]._id && newArray[i].quantity > 0) {\n        newArray[i].quantity += 1;\n        newArray.splice(arrayCart.length - 1, 1);\n        return newArray;\n      }\n\n      if (arrayCart[i]._id === arrayCart[arrayCart.length - 1]._id && newArray[arrayCart.length - 1].quantity === 0) {\n        newArray[i].quantity += 1;\n        return newArray;\n      }\n    }\n\n    return newArray;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }, this.state.list);\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    products: state.product,\n    cart: state.cart\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: data => {\n      dispatch(addProductInCart(data));\n    }\n  };\n} // export default Cart;\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ListCard);","map":{"version":3,"sources":["C:/Users/Jumo/Documents/Project/React_project/e-commerce/mon-app/src/component/ListCard.js"],"names":["React","Card","Button","Container","Row","Col","Link","addProductInCart","connect","ListCard","Component","constructor","props","state","list","params","addCart","bind","componentDidMount","products","componentWillReceiveProps","nextProps","data","endPoint","type","displayAll","displayByCategory","displayByArticlesSearch","displayBySort","displayOneArticle","displayCart","setState","CardProduct","value","index","width","height","window","location","origin","photo","_id","article","price","describe","describeProduct","map","category","undefined","toLowerCase","dataSort","sort","a","b","reverse","arrayCart","cart","push","quantity","actions","checkIfExist","newArray","i","length","splice","render","mapStateToProps","product","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React  from \"react\";\r\nimport {Card, Button, Container, Row, Col} from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { addProductInCart } from \"../actions/actions\";\r\nimport {connect} from \"react-redux\";\r\n \r\nclass ListCard extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            list: [],\r\n            params: this.props.params,\r\n        }\r\n        this.addCart = this.addCart.bind(this);\r\n    }\r\n\r\n    async componentDidMount(){\r\n        this.list(await this.props.products, this.props.params)\r\n    }\r\n\r\n    async componentWillReceiveProps(nextProps){\r\n        this.list(await this.props.products, nextProps.params)\r\n\r\n    }\r\n\r\n    async list(data, endPoint){  \r\n        let list;\r\n        switch(endPoint.type){\r\n            case \"all\":\r\n                list = this.displayAll(data, endPoint)\r\n            break;\r\n            case \"filter\":\r\n                list = this.displayByCategory(data, endPoint)\r\n            break;\r\n            case \"searcharticle\":\r\n                list = this.displayByArticlesSearch(data, endPoint)\r\n            break;\r\n            case \"sort\":\r\n                list = this.displayBySort(data, endPoint)\r\n            break;\r\n            case \"article\":\r\n                list = this.displayOneArticle(data, endPoint)\r\n            break;\r\n            case \"cart\":\r\n                list = this.displayCart(data)\r\n            break;\r\n            default:\r\n            return null\r\n    \r\n        }\r\n        this.setState({list: await list})\r\n    }\r\n    \r\n    \r\n    CardProduct (value, index) {\r\n        return (\r\n            <Col md={4} lg={3} key={index} >\r\n                <Card className=\"border border-secondary mt-3 mr-3\" style={{ width: '100%', height: \"30em\" }}>\r\n                    <Card.Img variant=\"pic\" src={window.location.origin + \"/img/\" + value.photo}  style={{ width: \"auto\", height: \"16em\" }}/>\r\n                    <Card.Body>\r\n                        <Link  to={\"/article/\"+value._id} className=\"p-0 text-dark\">{value.article}</Link>\r\n                        <Card.Text>{value.price}$</Card.Text>\r\n                        <Card.Text>description: {value.describe}</Card.Text>\r\n                        <Button onClick={() => {this.addCart(value)}} variant=\"primary\">Add cart</Button>\r\n                        \r\n                    </Card.Body>\r\n                </Card>\r\n            </Col>\r\n            \r\n        )  \r\n    }\r\n    \r\n    describeProduct(value, index){\r\n        return (\r\n            <Container className=\"border border-secondary mt-3 mr-3\" key={index} >\r\n                <Row>\r\n                    <Col lg={4}><img src={window.location.origin + \"/img/\" + value.photo} style={{ width: '15em' }}/></Col>\r\n                    <Col>\r\n                        <Row>\r\n                            <Col lg={12}><p>{value.article}</p></Col>\r\n                            <Col lg={12}><p>{value.describe}</p></Col>\r\n                            <Col>                \r\n                                <Button  variant=\"primary\">Add cart</Button>\r\n                            </Col>\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n    \r\n        )  \r\n    }\r\n    \r\n    async displayAll(data, endPoint){\r\n        \r\n        let list = await data.map((value, index) => {\r\n        if(endPoint.category === (undefined || \"all\")){\r\n            return this.CardProduct(value, index);    \r\n            }\r\n        });\r\n        return list;\r\n    }\r\n    \r\n    async displayByCategory(data, endPoint){\r\n        let list = await data.map((value, index) => {\r\n            \r\n                if(endPoint.category === value.category){\r\n                    return this.CardProduct(value, index);     \r\n                }\r\n                else if(endPoint.category === \"all\"){\r\n                    return this.CardProduct(value, index);     \r\n                }\r\n            });\r\n    \r\n            return list\r\n    }\r\n    \r\n    async displayByArticlesSearch(data, endPoint){\r\n        let list = await data.map((value, index) => {\r\n                if(endPoint.category === value.article.toLowerCase()){\r\n                    return this.CardProduct(value, index);     \r\n                }\r\n            });\r\n    \r\n            return list;\r\n    }\r\n    \r\n    async displayBySort(data, endPoint){\r\n        let dataSort;\r\n        let list;\r\n            dataSort = await data;\r\n            let sort = await data.sort((a, b) =>  a.price - b.price );\r\n    \r\n            if(endPoint.category === \"low\" ) {dataSort = sort} \r\n            else if(endPoint.category === \"high\") {dataSort = sort.reverse()}\r\n        \r\n             list = await dataSort.map((value, index) => {\r\n                return this.CardProduct(value, index);  \r\n            });\r\n        \r\n    \r\n        return list\r\n    }\r\n    \r\n    async displayOneArticle(data, endPoint){\r\n        let list = await data.map((value, index) => {\r\n                if(endPoint.category === value._id){\r\n                    return this.describeProduct(value, index);     \r\n                }\r\n            });\r\n            return list;\r\n    }\r\n    \r\n    async displayCart(data){\r\n        let list = await data.map((value, index) => {\r\n                    return this.describeProduct(value, index);     \r\n                \r\n            });\r\n            return list;\r\n    }\r\n\r\n    async addCart(value){\r\n        let arrayCart = await this.props.cart;\r\n        \r\n        arrayCart.push({_id: value._id, article: value.article, price: value.price, quantity: 0, photo: value.photo});\r\n\r\n        this.props.actions(this.checkIfExist(arrayCart))\r\n    }\r\n\r\n    checkIfExist(arrayCart){\r\n        let newArray = arrayCart;\r\n\r\n        for( var i = 0 ;i < arrayCart.length; i++){\r\n                if (arrayCart[i]._id === arrayCart[arrayCart.length - 1]._id && newArray[i].quantity > 0){\r\n                    \r\n                    newArray[i].quantity += 1;\r\n                    newArray.splice((arrayCart.length - 1), 1);\r\n                    return newArray;\r\n                }\r\n\r\n                if ( arrayCart[i]._id === arrayCart[arrayCart.length - 1]._id && newArray[arrayCart.length - 1].quantity === 0){\r\n            \r\n                    newArray[i].quantity += 1;\r\n                    return newArray;\r\n\r\n                }\r\n        }\r\n        return newArray;\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            \r\n            <Row>{this.state.list}</Row>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\nfunction mapStateToProps(state){\r\n    return {\r\n      products: state.product,\r\n      cart: state.cart,\r\n\r\n    };\r\n  }\r\n\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return { actions: (data) => {dispatch(addProductInCart(data))} }\r\n  }\r\n\r\n// export default Cart;\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ListCard)\r\n"]},"metadata":{},"sourceType":"module"}